(this.webpackJsonpglide=this.webpackJsonpglide||[]).push([[30],{585:function(e,t,r){"use strict";r.r(t),r.d(t,"isAuthenticatedUser",(function(){return g})),r.d(t,"isFirebaseUserSignedIn",(function(){return A})),r.d(t,"onAuthStateChanged",(function(){return I})),r.d(t,"removeOnAuthStateChanged",(function(){return C})),r.d(t,"signIn",(function(){return N})),r.d(t,"setAuthPersistence",(function(){return M})),r.d(t,"signUp",(function(){return R})),r.d(t,"isThirdPartyCookieError",(function(){return W})),r.d(t,"signOut",(function(){return V}));var n=r(10),a=r(2),u=r.n(a),c=r(8),s=r(60),i=(r(586),r(6)),o=r(135),p=r(3),f=r(726),b=r(12),d=r(658),l=r(80),h=r(781),x=r(55),O=r(84),k=r(33);function g(e){return Object(i.hasOwnProperty)(e,"firebaseUser")}var v="loading",j=!1;function w(){j||(Object(o.a)(),s.auth().onAuthStateChanged(U,(function(e){return Object(b.a)("Firebase auth failed",e)})),j=!0)}var y=[],m=!0;function A(){return void 0!==v&&"loading"!==v}function I(e){w(),"loading"!==v&&m&&e(Object(i.definedMap)(v,(function(e){return e.firebaseUser}))),y.push(e)}function C(e){var t=y.indexOf(e);t<0||y.splice(t,1)}function P(e){return D.apply(this,arguments)}function D(){return(D=Object(c.a)(u.a.mark((function e(t){var r,n,a,c,s,o,p;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="loading"===v||void 0===t!==(void 0===v)||void 0!==t&&void 0!==v&&t.firebaseUser.uid!==v.firebaseUser.uid,v=t,void 0===t||void 0===t.googleAccessToken){e.next=5;break}return e.next=5,Object(f.h)(t.googleAccessToken);case 5:if(r){e.next=7;break}return e.abrupt("return");case 7:if(m){e.next=9;break}return e.abrupt("return");case 9:for(n=!0,a=!1,c=void 0,e.prev=12,s=y[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){p=o.value;try{p(Object(i.definedMap)(t,(function(e){return e.firebaseUser})))}catch(u){Object(b.a)("Error calling auth state changed callback",u)}}e.next=20;break;case 16:e.prev=16,e.t0=e.catch(12),a=!0,c=e.t0;case 20:e.prev=20,e.prev=21,n||null==s.return||s.return();case 23:if(e.prev=23,!a){e.next=26;break}throw c;case 26:return e.finish(23);case 27:return e.finish(20);case 28:case"end":return e.stop()}}),e,null,[[12,16,20,28],[21,,23,27]])})))).apply(this,arguments)}function F(){return T.apply(this,arguments)}function T(){return(T=Object(c.a)(u.a.mark((function e(){var t,r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(f.a)();case 3:t=e.sent,e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",!1);case 9:if(Object(b.b)("Got auth2"),void 0!==t){e.next=12;break}return e.abrupt("return",!1);case 12:if(t.isSignedIn.get()){e.next=14;break}return e.abrupt("return",!1);case 14:return e.next=16,Object(l.a)().callAuthCloudFunction("getOAuth2TokensForGoogleSheets",{});case 16:if(void 0!==(r=e.sent)){e.next=19;break}return e.abrupt("return",!1);case 19:if(403!==r.status){e.next=21;break}return e.abrupt("return",!0);case 21:if(r.ok){e.next=24;break}return Object(b.a)("No access token from the server"),e.abrupt("return",!1);case 24:return e.next=26,r.json();case 26:if(n=e.sent,Object(i.hasOwnProperty)(n,"accessToken")){e.next=29;break}return e.abrupt("return",Object(p.hb)("Response to getAccessToken not recognized"));case 29:return e.abrupt("return",Object(p.i)(n.accessToken));case 30:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}var S=!1;function U(e){return E.apply(this,arguments)}function E(){return(E=Object(c.a)(u.a.mark((function e(t){var r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m){e.next=2;break}return e.abrupt("return");case 2:if(S=!0,null!==t){e.next=8;break}return Object(b.b)("Not logged in"),e.next=7,P(void 0);case 7:return e.abrupt("return");case 8:if(!k.z()){e.next=12;break}e.t0=void 0,e.next=15;break;case 12:return e.next=14,F();case 14:e.t0=e.sent;case 15:return r=e.t0,n="boolean"===typeof r?void 0:r,e.next=19,P({firebaseUser:t,googleAccessToken:n});case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return G.apply(this,arguments)}function G(){return(G=Object(c.a)(u.a.mark((function e(){var t,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==v&&"loading"!==v){e.next=2;break}return e.abrupt("return",void 0);case 2:return e.next=4,F();case 4:if("boolean"!==typeof(t=e.sent)){e.next=8;break}return Object(b.a)("Could not get access token from cloud function"),e.abrupt("return",void 0);case 8:return r=Object(n.a)(Object(n.a)({},v),{},{googleAccessToken:t}),e.next=11,P(r);case 11:return e.abrupt("return",r);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return z.apply(this,arguments)}function z(){return(z=Object(c.a)(u.a.mark((function e(){var t,r,n,a,c,i,o,b;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(),e.next=3,_();case 3:if(void 0===(t=e.sent)){e.next=6;break}return e.abrupt("return",t);case 6:if(e.prev=6,S){e.next=9;break}throw new Error("Trying to sign in before first Firebase Auth change in signIn");case 9:return m=!1,Object(x.h)("sign in start",{}),e.next=13,Object(f.a)();case 13:if(void 0!==(r=e.sent)){e.next=16;break}return e.abrupt("return",{kind:"no-google-libraries"});case 16:return e.next=18,r.signIn({prompt:"select_account"});case 18:if((n=e.sent).isSignedIn()){e.next=25;break}return Object(x.h)("sign in failed",{reason:"Google user not signed in"}),m=!0,e.next=24,P(void 0);case 24:throw new Error("Google User sign-in did not stick.");case 25:return a=n.getAuthResponse(!0),c=s.auth.GoogleAuthProvider.credential(a.id_token,a.access_token),e.next=29,s.auth().signInWithCredential(c);case 29:if(null!==(i=e.sent).user){e.next=36;break}return Object(x.h)("sign in failed",{reason:"Firebase sign in failed"}),m=!0,e.next=35,P(void 0);case 35:throw new Error("Firebase sign-in resulted in a null user.");case 36:return e.next=38,F();case 38:if(!1!==(o=e.sent)){e.next=45;break}return Object(x.h)("sign in failed",{reason:"Could not get access token"}),e.next=43,s.auth().signOut();case 43:throw m=!0,new Error("Could not getAccessTokenForCurrentFirebaseUser in signIn");case 45:if("string"!==typeof o){e.next=52;break}return Object(x.h)("sign in success",{}),b={firebaseUser:i.user,googleAccessToken:o},m=!0,e.next=51,P(b);case 51:return e.abrupt("return",b);case 52:return Object(p.d)(!0===o),e.next=55,R(void 0,!0);case 55:return e.abrupt("return",e.sent);case 58:return e.prev=58,e.t0=e.catch(6),e.abrupt("return",K(e.t0));case 61:case"end":return e.stop()}}),e,null,[[6,58]])})))).apply(this,arguments)}function M(e){return L.apply(this,arguments)}function L(){return(L=Object(c.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(),e.next=3,s.auth().setPersistence(t?s.auth.Auth.Persistence.LOCAL:s.auth.Auth.Persistence.SESSION);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){return J.apply(this,arguments)}function J(){return(J=Object(c.a)(u.a.mark((function e(t){var r,n,a,c,o,k,g,v,j,y,A,I,C,D,F,T,U,E,G=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=G.length>1&&void 0!==G[1]&&G[1],w(),e.next=4,M(!1);case 4:return e.next=6,_();case 6:if(void 0===(n=e.sent)){e.next=9;break}return e.abrupt("return",n);case 9:if(e.prev=9,S){e.next=12;break}throw new Error("Trying to sign in before first Firebase Auth change in signUp");case 12:return m=!1,e.next=15,Object(f.a)();case 15:if(void 0!==(a=e.sent)){e.next=18;break}return e.abrupt("return",{kind:"no-google-libraries"});case 18:return Object(x.h)("sign up started",{}),e.next=21,a.grantOfflineAccess({scope:f.f,prompt:r?"consent":"consent select_account"});case 21:return c=e.sent,o=c.code,k={code:o},e.next=26,Object(l.a)().callAuthIfAvailableCloudFunction("getOAuth2TokensForGoogleSheets",k,{});case 26:if(g=e.sent,Object(p.I)(g)){e.next=32;break}throw Object(x.h)("sign up failed",{reason:"Could not get OAuth2 tokens"}),Object(b.a)("Could not get tokens for code",g),m=!0,new Error("Could not getOAuth2TokensForGoogleSheets: ".concat(Object(i.definedMap)(g,(function(e){return e.statusText}))));case 32:return e.next=34,g.json();case 34:return v=e.sent,j=v.idToken,y=v.accessToken,A=v.refreshToken,Object(b.b)("OAuth2 tokens",j,y),I=s.auth.GoogleAuthProvider.credential(j,y),e.next=42,s.auth().signInWithCredential(I);case 42:if(C=e.sent,null!==(D=C.user)){e.next=49;break}throw Object(x.h)("sign up failed",{reason:"Firebase sign in failed"}),Object(b.a)("Could not sign in with Firebase"),m=!0,new Error("Firebase sign-up resulted in a null user.");case 49:return e.next=51,Object(h.a)(Object(O.d)());case 51:return F=e.sent,T=Object(i.definedMapWithDefault)(F,0,(function(e){return e.currentVersion})),U={email:Object(p.eb)(D.email),displayName:Object(p.eb)(D.displayName),phoneNumber:Object(p.eb)(D.phoneNumber),photoURL:Object(p.eb)(D.photoURL),flags:{allowEmail:t,lastAcceptedTermsOfService:T},integrations:[{name:"google-drive",kind:"google-drive",authentication:{kind:"oauth2-offline",idToken:j,refreshToken:A}}]},E={firebaseUser:D,googleAccessToken:y},e.next=57,Object(d.h)(U,{});case 57:if(!e.sent){e.next=59;break}Object(x.h)("sign up success",{user_id:D.uid,referrer:Object(d.b)()});case 59:return Object(b.b)("Authenticated user",E),m=!0,e.next=63,P(E);case 63:return e.abrupt("return",E);case 66:return e.prev=66,e.t0=e.catch(9),e.abrupt("return",K(e.t0));case 69:case"end":return e.stop()}}),e,null,[[9,66]])})))).apply(this,arguments)}function W(e){return Object(i.hasOwnProperty)(e,"error")&&Object(i.hasOwnProperty)(e,"details")&&"idpiframe_initialization_failed"===e.error&&"Cookies are not enabled in current environment."===e.details}function K(e){m=!0;var t=!1,r=!1;Object(i.hasOwnProperty)(e,"code")&&("auth/popup-closed-by-user"===e.code?t=!0:"auth/popup-blocked-by-browser"===e.code&&(r=!0)),Object(i.hasOwnProperty)(e,"error")&&("popup_closed_by_user"===e.error?t=!0:"popup_blocked_by_browser"===e.error&&(r=!0));var n=W(e);return t?(Object(x.h)("sign in closed by user",{}),{kind:"declined-sign-in"}):r?(Object(x.h)("sign in blocked by popup blocker",{}),{kind:"popup-blocked"}):n?{kind:"cookies-blocked"}:(Object(x.h)("sign in failed",{reason:"Exception thrown"}),Object(b.a)("error signing in",e),{kind:"unexpected-error",message:e instanceof Error?e.message:JSON.stringify(e,void 0,4)})}function V(){return q.apply(this,arguments)}function q(){return(q=Object(c.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(b.b)("signing out"),e.next=3,Object(f.a)();case 3:return void 0!==(t=e.sent)&&t.isSignedIn.get()&&t.signOut(),e.next=7,M(!1);case 7:return e.next=9,s.auth().signOut();case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},658:function(e,t,r){"use strict";r.d(t,"m",(function(){return l})),r.d(t,"b",(function(){return h})),r.d(t,"h",(function(){return x})),r.d(t,"a",(function(){return k})),r.d(t,"o",(function(){return w})),r.d(t,"n",(function(){return m})),r.d(t,"g",(function(){return I})),r.d(t,"d",(function(){return P})),r.d(t,"l",(function(){return F})),r.d(t,"i",(function(){return U})),r.d(t,"c",(function(){return _})),r.d(t,"e",(function(){return N})),r.d(t,"j",(function(){return M})),r.d(t,"k",(function(){return R})),r.d(t,"p",(function(){return W})),r.d(t,"f",(function(){return V}));var n,a=r(10),u=r(2),c=r.n(u),s=r(8),i=r(15),o=r(3),p=r(12),f=r(80),b=r(50),d=r(92);function l(e){n=e}function h(){return n}function x(e,t){return O.apply(this,arguments)}function O(){return(O=Object(s.a)(c.a.mark((function e(t,r){var a,u,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(p.b)("updating user",t),e.next=3,Object(f.a)().callAuthCloudFunction("setOrUpdateUser",{updates:t,removals:r,referredBy:n});case 3:if(a=e.sent,Object(o.I)(a)){e.next=6;break}return e.abrupt("return",Object(o.hb)("Could not save user updates"));case 6:return e.next=8,a.json();case 8:return u=e.sent,s=u.created,e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e,t){return g.apply(this,arguments)}function g(){return(g=Object(s.a)(c.a.mark((function e(t,r){var n,a,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={sheetsFileID:t,organizationID:r},e.next=3,Object(f.a)().callAuthCloudFunction("generatePublishedAppDataFromSheet",n);case 3:if(void 0!==(a=e.sent)){e.next=6;break}return e.abrupt("return","Network error");case 6:return e.next=8,a.json();case 8:if(u=e.sent,a.ok){e.next=14;break}if(Object(p.a)("Could not generate published app data",a),"string"!==typeof u.error){e.next=13;break}return e.abrupt("return",u.error);case 13:return e.abrupt("return","An error occurred.");case 14:return e.abrupt("return",u);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return j.apply(this,arguments)}function j(){return(j=Object(s.a)(c.a.mark((function e(t){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.a)().callAuthCloudFunction("modifySyntheticColumns",t);case 2:return r=e.sent,e.abrupt("return",Object(o.I)(r));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,t,r,n,a){return y.apply(this,arguments)}function y(){return(y=Object(s.a)(c.a.mark((function e(t,r,n,a,u){var s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={appID:t,set:{[r.name]:[n]},confirmDestructive:u},a&&(s.rowIDColumns=[[r.name,n.name]]),e.next=4,v(s);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e,t,r){return A.apply(this,arguments)}function A(){return(A=Object(s.a)(c.a.mark((function e(t,r,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v({appID:t,rowIDColumns:[[r.name,n]]});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t,r,n){return C.apply(this,arguments)}function C(){return(C=Object(s.a)(c.a.mark((function e(t,r,n,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v({appID:t,remove:{[r.name]:[n]},confirmDestructive:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t,r,n){return D.apply(this,arguments)}function D(){return(D=Object(s.a)(c.a.mark((function e(t,r,n,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v({appID:t,move:{[r.name]:[[n,a]]}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e,t,r,n){return T.apply(this,arguments)}function T(){return(T=Object(s.a)(c.a.mark((function e(t,r,n,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v({appID:t,setProtected:{[r.name]:[[n,a]]}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var S="Something went wrong sending your SMS.";function U(e,t){return E.apply(this,arguments)}function E(){return(E=Object(s.a)(c.a.mark((function e(t,r){var n,a,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={appID:t,phoneNumber:r},e.next=3,Object(d.b)("sendShareSMS",n);case 3:if(a=e.sent,!Object(o.I)(a)){e.next=6;break}return e.abrupt("return",void 0);case 6:if(void 0!==a){e.next=8;break}return e.abrupt("return",S);case 8:return e.next=10,a.json();case 10:if(u=e.sent,!Object(i.hasOwnProperty)(u,"error")||"string"!==typeof u.error){e.next=13;break}return e.abrupt("return",u.error);case 13:return e.abrupt("return",S);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e,t){return G.apply(this,arguments)}function G(){return(G=Object(s.a)(c.a.mark((function e(t,r){var n,a,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={appID:t,query:r},e.next=3,Object(f.a)().callAuthCloudFunction("getUnsplashImages",n);case 3:if(a=e.sent,Object(o.I)(a)){e.next=6;break}return e.abrupt("return",{results:void 0,error:"Oh sheet!"});case 6:return e.next=8,a.json();case 8:if(u=e.sent,!Object(i.hasOwnProperty)(u,"errors")){e.next=11;break}return e.abrupt("return",{results:void 0,error:"Oh sheet! Please try again!"});case 11:if(Object(i.hasOwnProperty)(u,"results")){e.next=13;break}return e.abrupt("return",{results:void 0,error:"Oh sheet! Please try again!"});case 13:return e.abrupt("return",{results:u.results,error:void 0});case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,t){return z.apply(this,arguments)}function z(){return(z=Object(s.a)(c.a.mark((function e(t,r){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={appID:t,imageId:r},e.next=3,Object(f.a)().callAuthCloudFunction("pingUnsplashDownload",n);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e,t){return L.apply(this,arguments)}function L(){return(L=Object(s.a)(c.a.mark((function e(t,r){var n,a,u,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={appID:t,plan:r},e.next=3,Object(f.a)().callAuthCloudFunction("setAppPlan",n);case 3:if(void 0!==(a=e.sent)){e.next=6;break}return e.abrupt("return",{ok:!1,status:500});case 6:return u=a.ok,s=a.status,e.abrupt("return",{ok:u,status:s});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e,t,r,n){return J.apply(this,arguments)}function J(){return(J=Object(s.a)(c.a.mark((function e(t,r,n,u){var s,i,o,p,b;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={appID:t,plan:r,attachPaymentMethodAsDefault:u,numUsers:n},e.next=3,Object(f.a)().callAuthCloudFunction("setAppPlanUnified",s);case 3:if(void 0!==(i=e.sent)){e.next=6;break}return e.abrupt("return",{ok:!1,status:500});case 6:return o=i.ok,p=i.status,e.next=9,i.json();case 9:return b=e.sent,e.abrupt("return",Object(a.a)(Object(a.a)({},b),{},{ok:o,status:p}));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e,t,r,n){return K.apply(this,arguments)}function K(){return(K=Object(s.a)(c.a.mark((function e(t,r,n,a){var u,s,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u={appID:t,organizationID:r,confirmed:n,asPublicApp:a},e.next=3,Object(f.a)().callAuthCloudFunction("transferAppToOrganization",u);case 3:if(void 0!==(s=e.sent)){e.next=6;break}return e.abrupt("return",b.b.ErrorOther);case 6:if(!s.ok){e.next=8;break}return e.abrupt("return",void 0);case 8:return e.next=10,s.json();case 10:if(o=e.sent,!Object(i.hasOwnProperty)(o,"response")||"string"!==typeof o.response){e.next=13;break}return e.abrupt("return",o.response);case 13:return e.abrupt("return",b.b.ErrorOther);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e,t,r){return q.apply(this,arguments)}function q(){return(q=Object(s.a)(c.a.mark((function e(t,r,n){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={appID:t,checkCompatibilityIssues:r,didReconnectSpreadsheet:n},e.next=3,Object(f.a)().callAuthCloudFunction("reloadPublishedAppDataFromSheet",a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},726:function(e,t,r){"use strict";r.d(t,"f",(function(){return b})),r.d(t,"g",(function(){return g})),r.d(t,"d",(function(){return j})),r.d(t,"c",(function(){return y})),r.d(t,"a",(function(){return A})),r.d(t,"h",(function(){return C})),r.d(t,"e",(function(){return D}));var n=r(2),a=r.n(n),u=r(8),c=r(12),s=r(3),i=r(210),o=r(49);r.d(t,"b",(function(){return i.a}));var p,f,b="https://www.googleapis.com/auth/drive.file",d=!1,l=!1;function h(){return x.apply(this,arguments)}function x(){return(x=Object(u.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(!1===l&&t<40)){e.next=7;break}return e.next=4,Object(s.tb)(500);case 4:t++,e.next=1;break;case 7:return e.abrupt("return",l);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return k.apply(this,arguments)}function k(){return(k=Object(u.a)(a.a.mark((function e(){var t,r,n,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(c.b)("initing google api"),Object(o.d)("https://apis.google.com/js/platform.js?onload=gapiInitializedCallback"),e.next=4,h();case 4:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:return t="loaded",r=new Promise((function(e,r){var n=0;gapi.load("client:picker",{callback:function(){var c=Object(u.a)(a.a.mark((function u(){return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(void 0===gapi.client&&n<40)){a.next=6;break}return a.next=3,Object(s.tb)(500);case 3:n++,a.next=0;break;case 6:if(void 0!==gapi.client){a.next=9;break}return r(new Error("Google API client was not installed")),a.abrupt("return");case 9:gapi.client.load("https://www.googleapis.com/discovery/v1/apis/drive/v3/rest").then((function(){return e(t)})).catch(r);case 10:case"end":return a.stop()}}),u)})));return function(){return c.apply(this,arguments)}}(),onerror:function(e){return r(e)}})})),e.next=10,Promise.race([r,Object(s.tb)(4e4).then((function(){return"timeout"}))]);case 10:if(e.sent===t){e.next=13;break}throw new Error("Timed out trying to load Google Drive support");case 13:return n=Object(i.a)(),p=new Promise((function(e,r){return gapi.client.init({apiKey:n.developerKey,clientId:n.clientId,discoveryDocs:n.discoveryDocs,scope:"email"}).then((function(){return e(t)})).catch(r)})),e.next=17,Promise.race([p,Object(s.tb)(4e4).then((function(){return"timeout"}))]);case 17:if(e.sent===t){e.next=20;break}throw new Error("Timed out trying to initialize Google API Client");case 20:d=!0;case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return v.apply(this,arguments)}function v(){return(v=Object(u.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===p&&(p=O()),e.abrupt("return",p);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(){return w.apply(this,arguments)}function w(){return(w=Object(u.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:if(d){e.next=4;break}return e.abrupt("return",void 0);case 4:return e.abrupt("return",window.google);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return m.apply(this,arguments)}function m(){return(m=Object(u.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:if(d){e.next=4;break}return e.abrupt("return",void 0);case 4:return e.abrupt("return",window.gapi);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return I.apply(this,arguments)}function I(){return(I=Object(u.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:if(d){e.next=4;break}return e.abrupt("return",void 0);case 4:return f=gapi.auth2.getAuthInstance(),e.abrupt("return",Object(s.n)(f));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){return P.apply(this,arguments)}function P(){return(P=Object(u.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:if(void 0!==(r=e.sent)){e.next=5;break}return e.abrupt("return");case 5:Object(c.b)("setting GAPI access token",t),r.client.setToken({access_token:t});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.gapiInitializedCallback=function(){l=!0};var D="Could not connect to Google."},781:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(2),a=r.n(n),u=r(8),c=r(15),s=r(19);function i(e){return"object"===typeof e&&Object(c.hasOwnProperty)(e,"currentVersion")&&Object(c.hasOwnProperty)(e,"termsLink")&&Object(c.hasOwnProperty)(e,"privacyLink")}function o(e){return p.apply(this,arguments)}function p(){return(p=Object(u.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDocument(s.u,"terms-of-service");case 2:return r=e.sent,e.abrupt("return",i(r)?r:void 0);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}}]);