(this.webpackJsonpglide=this.webpackJsonpglide||[]).push([[5],{363:function(e,t,n){"use strict";n.r(t),n.d(t,"registerOnPushTokenLoadCallback",(function(){return g})),n.d(t,"unregisterOnPushTokenLoadCallback",(function(){return m})),n.d(t,"suppressPushNotificationTopic",(function(){return N})),n.d(t,"unsuppressPushNotificationTopic",(function(){return P})),n.d(t,"prepareActivePushNotifications",(function(){return T})),n.d(t,"requestPushNotificationPermissionIfNecessary",(function(){return I}));var r,a=n(2),i=n.n(a),u=n(8),c=n(60),s=n.n(c),o=(n(975),n(15)),p=n(43),f=n(135),b=n(12);function d(){return void 0!==window.Notification&&void 0!==navigator.serviceWorker&&s.a.messaging.isSupported()}function l(){return v.apply(this,arguments)}function v(){return(v=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d()){e.next=2;break}return e.abrupt("return");case 2:if(void 0===r){e.next=6;break}return e.next=5,r;case 5:return e.abrupt("return",e.sent);case 6:return r=Object(u.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(f.a)(),(t=s.a.messaging()).usePublicVapidKey(Object(p.a)().fcmKey),e.next=5,navigator.serviceWorker.ready;case 5:n=e.sent,t.useServiceWorker(n);case 7:case"end":return e.stop()}}),e)})))(),e.next=9,r;case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=null,x=new Set;function h(e,t){return w.apply(this,arguments)}function w(){return(w=Object(u.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t){e.next=9;break}return e.prev=1,e.next=4,n(t);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),Object(b.a)(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})))).apply(this,arguments)}function g(e){return y.apply(this,arguments)}function y(){return(y=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:if(!x.has(t)){e.next=4;break}return e.abrupt("return");case 4:return x.add(t),e.next=7,h(k,t);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){x.delete(e)}var O=new o.DefaultMap((function(){return new Set}));function j(e,t){return O.get(e).has(t)}function N(e,t){O.get(e).add(t)}function P(e,t){O.get(e).delete(t)}var S=!1;function T(){return W.apply(this,arguments)}function W(){return(W=Object(u.a)(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:if(d()){e.next=4;break}return e.abrupt("return");case 4:if("granted"===Notification.permission){e.next=6;break}return e.abrupt("return");case 6:return t=s.a.messaging(),e.next=9,t.getToken();case 9:if(n=e.sent,k=n,!S){e.next=13;break}return e.abrupt("return");case 13:return S=!0,r=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,r,a,u,c,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!0,r=!1,a=void 0,e.prev=3,u=x[Symbol.iterator]();case 5:if(n=(c=u.next()).done){e.next=12;break}return s=c.value,e.next=9,h(t,s);case 9:n=!0,e.next=5;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),r=!0,a=e.t0;case 18:e.prev=18,e.prev=19,n||null==u.return||u.return();case 21:if(e.prev=21,!r){e.next=24;break}throw a;case 24:return e.finish(21);case 25:return e.finish(18);case 26:case"end":return e.stop()}}),e,null,[[3,14,18,26],[19,,21,25]])})));return function(t){return e.apply(this,arguments)}}(),t.onMessage(function(){var e=Object(u.a)(i.a.mark((function e(t){var n,r,a,u,c,s,p,f,d,l,v;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.data,r=t.notification,a=t.fcmOptions,u=r.title,c=r.body,s=r.icon,p=r.tag,f=n.topic,d=n.appID,l=Object(o.definedMap)(a,(function(e){return e.link})),!j(d,f)){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,navigator.serviceWorker.ready;case 8:if(null===(v=e.sent).active){e.next=14;break}return e.next=12,v.showNotification(u,{body:c,icon:s,tag:p,data:{type:"open-link-in-window",link:l}});case 12:e.next=15;break;case 14:Object(b.b)("active service worker is null");case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){Object(b.a)("In push notification handler: ".concat(e))})),e.next=18,r(n);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return M.apply(this,arguments)}function M(){return(M=Object(u.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d()){e.next=2;break}return e.abrupt("return");case 2:if(t=Notification,"default"!==(n=t.permission)){e.next=7;break}return e.next=6,Notification.requestPermission();case 6:n=e.sent;case 7:if("granted"===n){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,T();case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}}]);